---
title: "Share_Class"
knit: (function(input_file, encoding) {
  out_dir <- 'docs';
  rmarkdown::render(input_file,
 encoding=encoding,
 output_file=file.path(dirname(input_file), out_dir, 'index.html'))})
author: "Adrian D. Garcia"
date: "January 2020"
output: html_document
---

```{r setup, message=FALSE}
library(tidyverse)
library(readxl)
library(lubridate)
library(DT)
```

```{r data, message=FALSE}

INCEPTION <- read_excel(path = "launch-liquidation-data-for-adrian.xlsx", sheet = 1, na = "")

PATTERN <- c("(\\s)?([:alnum:]+)?( Load Waived)?( LW)?([:punct:]+)?([:alnum:]+)?(-[:alnum:])?(â„¢)?([:punct:]..[:punct:])?(\\s)?([:punct:][:alpha:]+[:punct:])?$")

Data <- INCEPTION %>%  
  select(Name) %>% 
  mutate(
    Match = str_detect(Name, PATTERN),
    EXTRACT = str_extract(Name, PATTERN)
    )
```

```{r data_show, echo=FALSE}
datatable(Data, options = list(autoWidth = TRUE, scrollX = TRUE))
```

```{r summary, message=FALSE}
SummaryTable <- Data %>% group_by(EXTRACT) %>% 
  summarise(cases = n()) %>% 
  arrange(-cases)
```

```{r summary_show, echo=FALSE}
datatable(SummaryTable)
```

```{r add, message=FALSE}
MODIFIED <- INCEPTION %>%  
  mutate(
    Match = str_detect(Name, PATTERN),
    EXTRACT = str_extract(Name, PATTERN)
    ) %>% 
  select(Name, Match, EXTRACT, 2:19)
         
```